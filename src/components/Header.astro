---
interface Props {
  phone?: string;
  logoText?: string;
}

const {
  phone = import.meta.env.PUBLIC_DEFAULT_PHONE || '8135551234',
  logoText = import.meta.env.PUBLIC_COMPANY_NAME || 'HomeService Leads'
} = Astro.props;

// Format phone for display
const formatPhone = (num: string) => {
  const cleaned = num.replace(/\D/g, '');
  if (cleaned.length === 10) {
    return `(${cleaned.slice(0,3)}) ${cleaned.slice(3,6)}-${cleaned.slice(6)}`;
  }
  return num;
};

const displayPhone = formatPhone(phone);
const telPhone = phone.replace(/\D/g, '');
---

<header class="sticky top-0 z-50 bg-white border-b border-gray-200 transition-shadow duration-200" id="main-header">
  <div class="max-w-6xl mx-auto px-4">
    <div class="flex items-center justify-between h-16 md:h-[72px]">
      <!-- Logo -->
      <a href="/" class="flex items-center gap-2 text-navy font-bold text-lg md:text-xl">
        <svg class="w-8 h-8 text-teal" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z" />
          <polyline points="9 22 9 12 15 12 15 22" />
        </svg>
        <span class="hidden sm:inline">{logoText}</span>
      </a>

      <!-- Phone Number (Desktop) -->
      <div class="hidden md:flex items-center gap-6">
        <a
          href={`tel:${telPhone}`}
          class="ringba_phone_number flex items-center gap-2 text-navy hover:text-teal transition-colors"
        >
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
          </svg>
          <span class="font-semibold">{displayPhone}</span>
        </a>

        <a href="#lead-form" class="btn-primary text-sm py-2.5 px-5 h-auto">
          Get Free Quote
        </a>
      </div>

      <!-- Mobile CTA -->
      <div class="flex md:hidden items-center gap-3">
        <a
          href={`tel:${telPhone}`}
          class="ringba_phone_number flex items-center justify-center w-10 h-10 rounded-full bg-teal text-white"
          aria-label="Call us"
        >
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
          </svg>
        </a>

        <a href="#lead-form" class="btn-primary text-sm py-2 px-4 h-auto">
          Free Quote
        </a>
      </div>
    </div>
  </div>
</header>

<script>
  // Add shadow on scroll
  const header = document.getElementById('main-header');

  if (header) {
    window.addEventListener('scroll', () => {
      if (window.scrollY > 10) {
        header.classList.add('shadow-header');
      } else {
        header.classList.remove('shadow-header');
      }
    });
  }
</script>
