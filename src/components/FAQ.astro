---
interface FAQItem {
  question: string;
  answer: string;
}

interface Props {
  faqs?: FAQItem[];
  city?: string;
  vertical?: 'hvac' | 'plumbing' | 'roofing';
  className?: string;
}

const { faqs, city = 'your area', vertical = 'hvac', className = '' } = Astro.props;

// Default FAQs by vertical
const defaultFAQs: Record<string, FAQItem[]> = {
  hvac: [
    {
      question: `How much does AC repair cost in ${city}?`,
      answer: `AC repair costs typically range from $150-$600 depending on the issue. We provide free estimates so you know the cost upfront before any work begins.`
    },
    {
      question: `Do you offer emergency HVAC service?`,
      answer: `Yes! We provide 24/7 emergency service throughout the ${city} area. Our technicians can typically arrive within 1-2 hours for urgent situations.`
    },
    {
      question: `Are your technicians licensed and insured?`,
      answer: `Absolutely. All our partnered contractors are fully licensed, bonded, and insured in the state. We verify credentials before connecting you.`
    },
    {
      question: `How quickly can someone come out?`,
      answer: `For emergencies, we aim for same-day service. For non-urgent repairs, we can usually schedule within 24-48 hours based on your preference.`
    },
    {
      question: `What areas do you serve?`,
      answer: `We serve ${city} and surrounding areas. Our network of local contractors covers the entire metro area and nearby communities.`
    }
  ],
  plumbing: [
    {
      question: `How much does a plumber cost in ${city}?`,
      answer: `Plumbing service calls typically range from $100-$400 depending on the issue. We provide free estimates so you know the cost upfront.`
    },
    {
      question: `Do you offer emergency plumbing service?`,
      answer: `Yes! We provide 24/7 emergency plumbing service throughout ${city}. Our plumbers can typically arrive within 1-2 hours for urgent issues like burst pipes or major leaks.`
    },
    {
      question: `Can you fix a clogged drain?`,
      answer: `Yes, our plumbers handle all types of drain cleaning including sinks, toilets, showers, and main sewer lines. We use professional equipment to clear even the toughest clogs.`
    },
    {
      question: `Do you install water heaters?`,
      answer: `Yes, we install and repair both tank and tankless water heaters. Our plumbers can help you choose the right size and type for your home.`
    },
    {
      question: `What areas do you serve?`,
      answer: `We serve ${city} and surrounding areas. Our network of licensed plumbers covers the entire metro area.`
    }
  ],
  roofing: [
    {
      question: `How much does roof repair cost in ${city}?`,
      answer: `Roof repairs typically range from $300-$1,500 depending on the damage. Full replacements range from $8,000-$25,000. We provide free inspections and estimates.`
    },
    {
      question: `Do you offer emergency roof repair?`,
      answer: `Yes! We provide emergency tarping and repairs for storm damage, leaks, and other urgent issues. Our roofers can typically respond within 24 hours.`
    },
    {
      question: `Do you work with insurance companies?`,
      answer: `Yes, our roofing contractors are experienced in working with insurance companies and can help you navigate the claims process for storm damage.`
    },
    {
      question: `What types of roofing do you install?`,
      answer: `We install all types including asphalt shingles, metal roofing, tile, and flat roofs. Our contractors can help you choose the best option for your home and budget.`
    },
    {
      question: `How long does a roof replacement take?`,
      answer: `Most residential roof replacements take 1-3 days depending on the size and complexity. We work efficiently to minimize disruption to your home.`
    }
  ]
};

const displayFAQs = faqs || defaultFAQs[vertical] || defaultFAQs.hvac;

// Generate JSON-LD schema
const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": displayFAQs.map(faq => ({
    "@type": "Question",
    "name": faq.question,
    "acceptedAnswer": {
      "@type": "Answer",
      "text": faq.answer
    }
  }))
};
---

<section class={`py-16 md:py-24 bg-white ${className}`} id="faq">
  <div class="max-w-3xl mx-auto px-4">
    <h2 class="text-2xl md:text-3xl font-bold text-center mb-12">
      Frequently Asked Questions
    </h2>

    <div class="space-y-4">
      {displayFAQs.map((faq, index) => (
        <details class="group border-b border-gray-200 pb-4" open={index === 0}>
          <summary class="flex justify-between items-center cursor-pointer py-4 text-lg font-semibold text-navy hover:text-teal transition-colors list-none">
            <span>{faq.question}</span>
            <svg
              class="w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform duration-200"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
          </summary>
          <p class="text-gray-600 leading-relaxed pb-2">
            {faq.answer}
          </p>
        </details>
      ))}
    </div>
  </div>
</section>

<!-- FAQ Schema JSON-LD -->
<script type="application/ld+json" set:html={JSON.stringify(faqSchema)} />
